

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Combined Heat and Power &mdash; EAO  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Discrete supply decisions - example battery in continuous intraday markets" href="../order_book/order_book_battery.html" />
    <link rel="prev" title="Cross commodity portfolios" href="../cross_commodity/cross_commodity_sample.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EAO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../eao.html">EAO package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../samples.html">Samples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#simple-start-optimizing-power-consumption-with-battery-pv">Simple start: Optimizing power consumption with battery &amp; PV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#green-ppa-and-structured-downstream-contract">Green PPA and structured downstream contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#marginal-costs-in-portfolio-optimization">Marginal costs in portfolio optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#multi-commodity-optimization">Multi commodity optimization</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../samples.html#combined-heat-and-power">Combined Heat and Power</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Combined Heat and Power</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Technical-Details">Technical Details</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Example-Portfolio">Example Portfolio</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#battery-optimization-against-an-order-book">Battery optimization against an order book</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#stochastic-linear-programs">Stochastic Linear Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#robust-optimization">Robust optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#split-optimization">Split optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../samples.html#parameter-handling">Parameter handling</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EAO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../samples.html">Samples</a></li>
      <li class="breadcrumb-item active">Combined Heat and Power</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/samples/combined_heat_power/chp_sample.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Combined-Heat-and-Power">
<h1>Combined Heat and Power<a class="headerlink" href="#Combined-Heat-and-Power" title="Link to this heading"></a></h1>
<p>The CHPAsset class represents an asset that can generate both heat and power at the same time and models starting procedures, minimum loads, ramping and a minimum runtime.</p>
<section id="Technical-Details">
<h2>Technical Details<a class="headerlink" href="#Technical-Details" title="Link to this heading"></a></h2>
<section id="Input-Parameters">
<h3>Input Parameters<a class="headerlink" href="#Input-Parameters" title="Link to this heading"></a></h3>
<p>Possible input parameters of the CHPAsset are</p>
<ul class="simple">
<li><p>Ramp <span class="math notranslate nohighlight">\(r\)</span></p></li>
<li><p>Conversion efficiency <span class="math notranslate nohighlight">\(\alpha\)</span> from heat to power.</p></li>
<li><p>Maximum share heat <span class="math notranslate nohighlight">\(\beta\)</span></p></li>
<li><p>Minimum capacity <span class="math notranslate nohighlight">\(l_t\)</span> for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>Maximum capacity <span class="math notranslate nohighlight">\(u_t\)</span> for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>Dispatch power <span class="math notranslate nohighlight">\(x_{-1}\)</span> from the previous timestep</p></li>
<li><p>Dispatch heat <span class="math notranslate nohighlight">\(w_{-1}\)</span> from the previous timestep</p></li>
<li><p>Number <span class="math notranslate nohighlight">\(k_{on}\)</span> of timesteps the asset has already been running</p></li>
<li><p>Number <span class="math notranslate nohighlight">\(k_{off}\)</span> of timesteps the asset has already been of</p></li>
<li><p>Minimum runtime <span class="math notranslate nohighlight">\(m_{run}\)</span></p></li>
<li><p>Minimum downtime <span class="math notranslate nohighlight">\(m_{down}\)</span></p></li>
<li><p>Start ramp specification:</p>
<ul>
<li><p>Minimum capacity <span class="math notranslate nohighlight">\(l^{start}_i\)</span> for timestep <span class="math notranslate nohighlight">\(i \in \left\{0,\dots, k_{start}\right\}\)</span> after starting</p></li>
<li><p>Maximum capacity <span class="math notranslate nohighlight">\(u^{start}_i\)</span> for timestep <span class="math notranslate nohighlight">\(i \in \left\{0,\dots, k_{start}\right\}\)</span> after starting</p></li>
</ul>
</li>
<li><p>Shutdown ramp specification:</p>
<ul>
<li><p>Minimum capacity <span class="math notranslate nohighlight">\(l^{shutdown}_i\)</span> for timestep <span class="math notranslate nohighlight">\(i \in \left\{0,\dots, k_{shutdown}\right\}\)</span> before shutting off</p></li>
<li><p>Maximum capacity <span class="math notranslate nohighlight">\(u^{shutdown}_i\)</span> for timestep <span class="math notranslate nohighlight">\(i \in \left\{0,\dots, k_{shutdown}\right\}\)</span> before shutting off</p></li>
</ul>
</li>
</ul>
</section>
<section id="Output-variables">
<h3>Output variables<a class="headerlink" href="#Output-variables" title="Link to this heading"></a></h3>
<p>The following variables are computed for a CHPAsset that runs for <span class="math notranslate nohighlight">\(T\)</span> timesteps:</p>
<ul class="simple">
<li><p>Dispatch power <span class="math notranslate nohighlight">\(x_t \in \mathbb{R}\)</span>, for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>Dispatch heat <span class="math notranslate nohighlight">\(w_t \in \mathbb{R}\)</span>, for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>“On”-variable <span class="math notranslate nohighlight">\(a_t \in \left\{0,1\right\}\)</span>, for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>“Start”-variable <span class="math notranslate nohighlight">\(s_t \in \left\{0,1\right\}\)</span>, for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
<li><p>“Shutdown”-variable <span class="math notranslate nohighlight">\(d_t \in \left\{0,1\right\}\)</span>, for every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span></p></li>
</ul>
<p>When they are not needed to enforce a minimum runtime, start costs or similar, the “on” and “start” variables are removed.</p>
</section>
<section id="Variable-bounds">
<h3>Variable bounds<a class="headerlink" href="#Variable-bounds" title="Link to this heading"></a></h3>
<p>The output variables are within the following bounds in every timestep <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span>:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(0 \leq x_t \leq u_t\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(0 \leq w_t \leq \beta u_t\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(0 \leq a_t \leq 1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(0 \leq s_t \leq 1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(0 \leq d_t \leq 1\)</span></p></li>
</ul>
</section>
<section id="Constraints">
<h3>Constraints<a class="headerlink" href="#Constraints" title="Link to this heading"></a></h3>
<p>The following constraints are used in the asset</p>
<ul>
<li><p><strong>Minimum and maximum capacity</strong>: The virtual dispatch <span class="math notranslate nohighlight">\(\tilde{x}_t = x_t + \alpha w_t\)</span> is 0 when <span class="math notranslate nohighlight">\(a_t = 0\)</span>, i.e. the asset is “off”, it is bounded by the start or shutdown specifications during the start and shutdown, and otherwise it is between minimum and maximum capacity, i.e. <span class="math">\begin{align*}
\tilde{x}_t &\geq& l_t \left[ a_t - \sum_{i=0}^{k_{shutdown}-1}d_{t+i+1} - \sum_{i=0}^{k_{start}-1}s_{t-i} \right] + \sum_{i=0}^{k_{start}-1}l^{start}_i s_{t-i} + \sum_{i=0}^{k_{shutdown}-1}l^{shutdown}_i d_{t+i+1} \\
\tilde{x}_t &\leq& u_t \left[ a_t - \sum_{i=0}^{k_{shutdown}-1}d_{t+i+1} - \sum_{i=0}^{k_{start}-1}s_{t-i} \right] + \sum_{i=0}^{k_{start}-1}u^{start}_i s_{t-i} + \sum_{i=0}^{k_{shutdown}-1}u^{shutdown}_i d_{t+i+1}
\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span>. It should be noted that the term <span class="math notranslate nohighlight">\(\sum_{i=0}^{k_{start}-1}s_{t-i}\)</span> is 1 if timestep <span class="math notranslate nohighlight">\(t\)</span> is part of the start ramp and 0 otherwise. Analogously, <span class="math notranslate nohighlight">\(\sum_{i=0}^{k_{shutdown}-1}d_{t+i+1}\)</span> is 1 if timestep <span class="math notranslate nohighlight">\(t\)</span> is part of the shutdown ramp and 0 otherwise. If <span class="math notranslate nohighlight">\(k_{on} &gt; 0\)</span> and <span class="math notranslate nohighlight">\(k_{on}&lt;k_{start}\)</span>, i.e. the asset is in the starting process at timestep <span class="math notranslate nohighlight">\(0\)</span>, the first <span class="math notranslate nohighlight">\(k_{start}-k_{on}\)</span> timesteps
are instead bounded by <span class="math">\begin{align*} l^{start}_{k_{on}+i} \leq \tilde{x}_i \leq u^{start}_{k_{on}+i} \end{align*}</span> for every <span class="math notranslate nohighlight">\(i \in \left\{0, \dots, k_{start}-k_{on}-1\right\}\)</span>.</p></li>
<li><div class="line-block">
<div class="line"><strong>Ramp</strong>: Ensure that the increase/decrease of the virtual dispatch <span class="math notranslate nohighlight">\(\tilde{x}_t = x_t + \alpha w_t\)</span> is bounded by <span class="math notranslate nohighlight">\(r\)</span>, unless during timesteps that belong to the start or shutdown ramp, i.e.</div>
<div class="line"><span class="math">\begin{align*}
\tilde{x}_t-\tilde{x}_{t-1} &\geq& -r \left[ a_{t-1} - \sum_{i=0}^{k_{shutdown}-1}d_{t+i} \right] - u_{t-1}\sum_{i=0}^{k_{shutdown}-1}d_{t+i} \\
\tilde{x}_t-\tilde{x}_{t-1} &\leq& r \left[ a_{t} - \sum_{i=0}^{k_{start}-1}s_{t-i} \right] + u_{t}\sum_{i=0}^{k_{start}-1}s_{t-i} ,
\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span>.</div>
</div>
</li>
<li><p><strong>Start constraints</strong>: (Only applicable when there is no start- or shutdown ramp specification, otherwise the start variables are defined simultaneously with the shutdown variables, see “start and shutdown constraints”) When the “on” variable changes from “off” to “on”, the start variable has to be 1, i.e. <span class="math">\begin{align*}s_t \geq a_t - a_{t-1},\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{1,\dots, T-1\right\}\)</span>. If <span class="math notranslate nohighlight">\(k_{on} = 0\)</span>, i.e. previous state <span class="math notranslate nohighlight">\(a_{-1}\)</span> is “off”, we need
the additional condition <span class="math">\begin{align*}s_0 \geq a_0.\end{align*}</span></p></li>
<li><p><strong>Start and shutdown constraints</strong>: (Only applicable when start or shutdown ramp are defined) Ensure that the start and shutdown variables are set correctly, i.e <span class="math">\begin{align*}
s_t - d_t &=& a_t - a_{t-1} \\
s_t + d_t &\leq& 1
\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{0,\dots, T-1\right\}\)</span>.</p></li>
<li><p><strong>Minimum runtime</strong>: Ensure that the asset follows the minimum runtime <span class="math notranslate nohighlight">\(m_{run}\)</span> and is on during the start and shutdown ramp, i.e. <span class="math">\begin{align*}a_t \geq s_{t-i}\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{1,\dots, T-1\right\}\)</span> and <span class="math notranslate nohighlight">\(i \in \left\{1, \dots, m_{run}+k_{start}+k_{shutdown}-1\right\}\)</span>. If <span class="math notranslate nohighlight">\(k_{on}&gt;0\)</span> and <span class="math notranslate nohighlight">\(m_{run}+k_{start}+k_{shutdown} &gt; k_{on}\)</span>, we need the additional condition <span class="math">\begin{align*}a_i \geq 1,\end{align*}</span> for all
<span class="math notranslate nohighlight">\(i \in \left\{0, \dots, m_{run}+k_{start}+k_{shutdown} -k_{on}-1\right\}\)</span>.</p></li>
<li><p><strong>Minimum downtime</strong>: If the asset turns off, it has to stay off for the minimum downtime <span class="math notranslate nohighlight">\(m_{down}\)</span>, i.e. <span class="math">\begin{align*}a_t \leq 1 - a_{t-i-1} + a_{t-i}\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{1,\dots, T-1\right\}\)</span> and <span class="math notranslate nohighlight">\(i \in \left\{1, \dots, m_{down}-1\right\}\)</span>. If <span class="math notranslate nohighlight">\(k_{off}&gt;0\)</span> and <span class="math notranslate nohighlight">\(m_{down} &gt; k_{off}\)</span>, we need the additional condition <span class="math">\begin{align*}a_i \leq 0,\end{align*}</span> for all
<span class="math notranslate nohighlight">\(i \in \left\{0, \dots, m_{down} -k_{off}-1\right\}\)</span>.</p></li>
<li><p><strong>Maximum share heat</strong>: Bound the heat dispatch by a percentage of the power dispatch, i.e. <span class="math">\begin{align*}w_t \leq \beta x_t,\end{align*}</span> for <span class="math notranslate nohighlight">\(t \in \left\{0, \dots, T-1\right\}\)</span>.</p></li>
</ul>
</section>
</section>
<section id="Example-Portfolio">
<h2>Example Portfolio<a class="headerlink" href="#Example-Portfolio" title="Link to this heading"></a></h2>
<section id="Imports">
<h3>Imports<a class="headerlink" href="#Imports" title="Link to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import numpy as np
import datetime as dt
import matplotlib.pyplot as plt

import sys
import os
myDir = os.path.join(os.getcwd(), &#39;../..&#39;)
sys.path.append(myDir)
addDir = os.path.join(os.getcwd(), &#39;../../../..&#39;)
sys.path.append(addDir)

import eaopack as eao
from eaopack.portfolio import Portfolio
from eaopack.basic_classes import Timegrid
from eaopack.optimization import Results
</pre></div>
</div>
</div>
</section>
<section id="Defining-a-portfolio">
<h3>Defining a portfolio<a class="headerlink" href="#Defining-a-portfolio" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>node_power = eao.assets.Node(&#39;node_power&#39;)
node_heat = eao.assets.Node(&#39;node_heat&#39;)
node_gas = eao.assets.Node(&#39;node_gas&#39;)

timegrid = eao.assets.Timegrid(dt.date(2021, 1, 1), dt.date(2021, 1, 2), freq=&#39;15min&#39;, main_time_unit=&#39;h&#39;)
simple_contract_power = eao.assets.SimpleContract(name=&#39;SC_power&#39;, price=&#39;price_power&#39;, nodes=node_power,
                                             min_cap=-30., max_cap=20)
simple_contract_heat = eao.assets.SimpleContract(name=&#39;SC_heat&#39;, price=&#39;price_heat&#39;, nodes=node_heat,
                                             min_cap=-30., max_cap=20.)
simple_contract_gas = eao.assets.SimpleContract(name=&#39;SC_gas&#39;, price=&#39;price_gas&#39;, nodes=node_gas,
                                             min_cap=-30., max_cap=20.)


chpasset = eao.assets.CHPAsset(name=&#39;CHP&#39;,
                               nodes=[node_power, node_heat, node_gas],
                               min_cap=5.,
                               max_cap=30.,
                               extra_costs=0,
                               conversion_factor_power_heat=0.5,
                               max_share_heat=0.5,
                               ramp=10,
                               start_ramp_lower_bounds=[1, 2],
                               shutdown_ramp_lower_bounds=[2, 3],
                               ramp_freq=&quot;15min&quot;,
                               start_costs=0.,
                               running_costs=0.,
                               min_runtime=0.,
                               time_already_running=0.,
                               min_downtime=0.,
                               time_already_off=1.,
                               last_dispatch=0.,
                               start_fuel=0)

prices = {&#39;price_power&#39;: np.sin(0.5*np.pi * np.arange(timegrid.T)*np.pi/10)+2,
          &#39;price_heat&#39;: np.cos(0.5*np.pi * np.arange(timegrid.T)*np.pi/10)+2,
          &#39;price_gas&#39;: np.ones(timegrid.T)*2,
          }

portfolio = eao.portfolio.Portfolio([chpasset, simple_contract_power, simple_contract_heat, simple_contract_gas])
eao.network_graphs.create_graph(portf = portfolio)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/samples_combined_heat_power_chp_sample_8_0.svg" src="../../_images/samples_combined_heat_power_chp_sample_8_0.svg" />
</div>
</div>
</section>
<section id="Performing-the-Optimization">
<h3>Performing the Optimization<a class="headerlink" href="#Performing-the-Optimization" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>op = portfolio.setup_optim_problem(prices, timegrid)
res = op.optimize(solver=&quot;GLPK_MI&quot;)
# res = op.optimize(solver=&quot;GLPK&quot;, make_soft_problem=True)  # Relax bool variables, i.e. allow &quot;half on&quot;
out = eao.io.extract_output(portfolio, op, res, prices)
out[&#39;summary&#39;]
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
...MIP problem configured. Beware of potentially long optimization and other issues inherent to MIP
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Values</th>
    </tr>
    <tr>
      <th>Parameter</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>status</th>
      <td>successful</td>
    </tr>
    <tr>
      <th>value</th>
      <td>243.759802</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Plotting-the-Results">
<h3>Plotting the Results<a class="headerlink" href="#Plotting-the-Results" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Define the grid size to display the figures:
num_imgs_per_row = 3
num_nodes = len(portfolio.nodes)
num_img_rows=int(np.ceil((num_nodes+2)/num_imgs_per_row))
fig, ax = plt.subplots(num_img_rows, num_imgs_per_row, tight_layout = True, figsize=(18,5*num_img_rows))
ax = ax.reshape(-1)

# Plot the dispatch for each node:
current_ax=0
dispatch_per_node = {node: [] for node in portfolio.nodes}
for mycol in out[&#39;dispatch&#39;].columns.values:
    for node in dispatch_per_node:
        if &#39;(&#39; + node + &#39;)&#39; in mycol:
            dispatch_per_node[node].append(mycol)
for node in dispatch_per_node:
    out[&#39;dispatch&#39;][dispatch_per_node[node]].plot(ax=ax[current_ax], style=&#39;-x&#39;)
    ax[current_ax].set_title(&quot;Dispatch &quot; + node)
    current_ax+=1

# Plot internal variables:
for v in out[&#39;internal_variables&#39;]:
    out[&#39;internal_variables&#39;][v].plot(ax=ax[current_ax], style=&#39;-x&#39;, label=v)
if out[&#39;internal_variables&#39;].shape[1] == 0:
    ax[current_ax].text(0.4, 0.5, &quot;No bool variables present&quot;)
ax[current_ax].set_title(&#39;Bool Variables&#39;)
ax[current_ax].legend()
current_ax+=1

# Plot prices
for key in out[&#39;prices&#39;]:
    out[&#39;prices&#39;][key].plot(ax=ax[current_ax], style=&#39;-x&#39;, label=key)
ax[current_ax].set_title(&#39;Prices&#39;)
ax[current_ax].legend()

# Remove empty axes:
for i in range(current_ax+1, len(ax)):
    fig.delaxes(ax[i])
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/samples_combined_heat_power_chp_sample_12_0.svg" src="../../_images/samples_combined_heat_power_chp_sample_12_0.svg" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../cross_commodity/cross_commodity_sample.html" class="btn btn-neutral float-left" title="Cross commodity portfolios" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../order_book/order_book_battery.html" class="btn btn-neutral float-right" title="Discrete supply decisions - example battery in continuous intraday markets" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>